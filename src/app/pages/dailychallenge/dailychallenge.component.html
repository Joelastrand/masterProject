<div class="mainSection">
    <div class="flexArea">
        <div class="challengeWindow" [@challengeInfo]="showGetChallengeButton">
            <h2>
                {{challengeName}}
            </h2>
            <h3 *ngIf="time > 0">
                {{ time }} minutes
            </h3>
        </div>
        <div [@challengeInfo]="showGetChallengeButton" style="border-bottom: 2px solid #D8D8D8; width: 80%; margin-bottom: 15%; background-color:#f5f5f0;"></div>
        <div class="getChallengeWindow" [@getChallengeButton]="showGetChallengeButton">
            <button class="getRandomChallengeButton" (click)="getRandomChallenge()">Get challenge</button>
        </div>

        <!--Finish challenge dialog getRandomChallenge-->
        <p-dialog [(visible)]="displayFinishChallengeDialog" [draggable]=false [closeOnEscape]=false width="500" [showHeader]=false
            modal="modal" [responsive]="true" [style]="{'background-color':' #3E5062'}">
            <div style="border-bottom: solid 2px gray; margin-bottom: 10%">
                <h1 style="margin: 0; color: #F6F6F6 ">Nicely done!</h1>
            </div>

            <h2 style="margin: 0; color: #F6F6F6">{{dailyChallengeStreak}}</h2>
            <p style="margin: 0; color: gray">Current streak</p>
            <h2 style="margin: 0; color: #F6F6F6; margin-top: 5%">{{dailyChallengeTotal}}</h2>
            <p style="margin: 0; color: gray">Total daily challenges done</p>


            <div style="margin-top: 15%; width: 100%; display: flex; align-items:center; justify-content: center">
                <button type="button" style="background-color: #3e8e41; border: none; height: 50%; width: 40%" pButton icon="" (click)="goToStart()"
                    label="Okay!"></button>
            </div>
        </p-dialog>

        <!-- Components for sequence type of challenges-->
        <div class="sequenceChallengeStatusWindow" [@sequence]="sequence">
            <div *ngIf="!sequenceStarted" style="margin-top: auto; width: 100%; height: 100%; display: flex; justify-content: flex-end; flex-direction: column">
                <div *ngFor="let item of sequenceList" style="height: 15%; background-color:#F6F6F6; display: flex;">
                    <div class="exerciseListItem">
                        <h6 style="margin: 0; margin-left: 2%">{{item.repeats}} X {{item.name}} </h6>
                    </div>
                </div>
            </div>

            <div class="currentExerciseImage" *ngIf="sequenceStarted">
                <img src="assets/dumbbells.png" style="max-width: auto; height: 100%" />
            </div>
            <div class="currentExercise" *ngIf="sequenceStarted">
                <h6 style="margin: 0; margin-left: 2%">{{sequenceList[exerciseIndex].name}}</h6>
                <h6 style="margin: 0; margin-left: 2%">{{sequenceList[exerciseIndex].repeats}}</h6>
            </div>

            <div *ngIf="sequenceStarted" style="flex: 1; width: 100%; display:flex; flex-direction: row; ">

                <div class="goButtonSequence" style="flex: 1; display:flex; vertical-align:middle; height: 50%; margin-bottom: 5%; flex-direction: column; align-items: flex-end; ">
                    <div class="skipAndPrevIcon" (click)="previousExerciseInSequence()" style="flex: 1; display:flex;  vertical-align:middle; flex-direction: column; align-items: flex-end;">
                        <mat-icon style="vertical-align:middle" aria-label="goBackArrow">keyboard_arrow_left</mat-icon>
                        <p style="font-size: 0.6em; margin: 0; padding: 0">Previous</p>
                    </div>
                </div>

                <!---     <button *ngIf="exerciseIndex == 0" disabled=true class="goButtonSequence" style="opacity: 0.7; vertical-align:middle; height: 50%; border-right: 1px solid #80C75C">
                    <mat-icon style="vertical-align:middle; margin-right: 20%" aria-label="goBackArrow">keyboard_arrow_left</mat-icon>
                </button>-->

                <!--style="flex: 1; vertical-align:middle; height: 50%; border-right: 1px solid #80C75C"-->
                <button (click)="nextExerciseInSequence()" class="finishExerciseButton" style="margin-right: 4%; margin-left: 4%;">
                    <mat-icon style="color: white" aria-label="check">check</mat-icon>
                </button>

                <div class="goButtonSequence" style="flex: 1; display:flex;  vertical-align:middle; height: 50%; flex-direction: column;  margin-bottom: 5%;  align-items: flex-start">

                    <div class="skipAndPrevIcon" (click)="nextExerciseInSequence()" style="flex: 1; display:flex;  vertical-align:middle; flex-direction: column;  align-items: flex-start">
                        <mat-icon style="vertical-align:middle" aria-label="goBackArrow">keyboard_arrow_right</mat-icon>
                        <p style="font-size: 0.6em; margin-left: 20%; padding: 0">Skip</p>
                    </div>

                </div>
                <!--
                <button (click)="finishChallenge()" *ngIf="exerciseIndex == sequenceList.length-1" class="goButtonSequence" style="vertical-align:middle; height: 50%; border-left: 1px solid #80C75C">
                    <mat-icon style="vertical-align:middle" aria-label="goBackArrow">check</mat-icon>
                </button>-->

            </div>
            <button *ngIf="!sequenceStarted" style="background-color: #3e8e41; color:white " class="goButtonSequence" (click)="initiateSequence()">Go!</button>

        </div>

        <!--Components for timer type of challenges-->
        <div class="timerChallengeStatusWindow" [@timer]="timer">
            <circle-progress [percent]=timerValue [maxPercent]=maxTimerValue [radius]="100" [outerStrokeWidth]="16" [innerStrokeWidth]="8"
                [outerStrokeColor]="'#78C000'" [renderOnClick]="false" [innerStrokeColor]="'#C7E596'" [animation]="false"></circle-progress>

            <button *ngIf="timerOn == false && !challengeFinished" mat-icon-button class="playButton" (click)="initiateChallenge()">
                <mat-icon aria-label="playButton">play_circle_filled</mat-icon>
            </button>
            <button *ngIf="timerOn == true && !challengeFinished" mat-icon-button class="pauseButton" (click)="pauseTimer()">
                <mat-icon aria-label="pauseButton">pause_circle_filled</mat-icon>
            </button>
            <button style="opacity: 0.4" disbled=true *ngIf="challengeFinished" mat-icon-button class="pauseButton" (click)="pauseTimer()">
                <mat-icon aria-label="pauseButtonDisabled">pause_circle_filled</mat-icon>
            </button>
        </div>
    </div>
</div>